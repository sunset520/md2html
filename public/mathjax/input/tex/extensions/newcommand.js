(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BeginEnvItem:()=>d});var n={};e.r(n),e.d(n,{default:()=>N});var r={};e.r(r),e.d(r,{default:()=>k});var a={};e.r(a),e.d(a,{NewcommandConfiguration:()=>P});const i=("undefined"!=typeof window?window:global).MathJax._.components.global,o=(i.GLOBAL,i.isObject,i.combineConfig,i.combineDefaults,i.combineWithMathJax),s=(i.MathJax,MathJax._.input.tex.Configuration),c=s.Configuration,m=(s.ConfigurationHandler,s.ParserConfiguration,MathJax._.input.tex.TexError.default),l=MathJax._.input.tex.StackItem,u=(l.MmlStack,l.BaseItem);class d extends u{get kind(){return"beginEnv"}get isOpen(){return!0}checkItem(e){if(e.isKind("end")){if(e.getName()!==this.getName())throw new m("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),e.getName());return[[this.factory.create("mml",this.toMml())],!0]}if(e.isKind("stop"))throw new m("EnvMissingEnd","Missing \\end{%1}",this.getName());return super.checkItem(e)}}const g=MathJax._.input.tex.UnitUtil.UnitUtil,f=MathJax._.input.tex.Token,h=f.Token,M=f.Macro;var p;!function(e){function t(e,t){return e.string.substring(e.i,e.i+t.length)!==t||t.match(/\\[a-z]+$/i)&&e.string.charAt(e.i+t.length).match(/[a-z]/i)?0:(e.i+=t.length,1)}e.GetCSname=function(e,t){if("\\"!==e.GetNext())throw new m("MissingCS","%1 must be followed by a control sequence",t);return g.trimSpaces(e.GetArgument(t)).substring(1)},e.GetCsNameArgument=function(e,t){let n=g.trimSpaces(e.GetArgument(t));if("\\"===n.charAt(0)&&(n=n.substring(1)),!n.match(/^(.|[a-z]+)$/i))throw new m("IllegalControlSequenceName","Illegal control sequence name for %1",t);return n},e.GetArgCount=function(e,t){let n=e.GetBrackets(t);if(n&&(n=g.trimSpaces(n),!n.match(/^[0-9]+$/)))throw new m("IllegalParamNumber","Illegal number of parameters specified in %1",t);return n},e.GetTemplate=function(e,t,n){let r=e.GetNext(),a=[],i=0,o=e.i;for(;e.i<e.string.length;){if(r=e.GetNext(),"#"===r){if(o!==e.i&&(a[i]=e.string.substring(o,e.i)),r=e.string.charAt(++e.i),!r.match(/^[1-9]$/))throw new m("CantUseHash2","Illegal use of # in template for %1",n);if(parseInt(r)!==++i)throw new m("SequentialParam","Parameters for %1 must be numbered sequentially",n);o=e.i+1}else if("{"===r)return o!==e.i&&(a[i]=e.string.substring(o,e.i)),a.length>0?[i.toString()].concat(a):i;e.i++}throw new m("MissingReplacementString","Missing replacement string for definition of %1",t)},e.GetParameter=function(e,n,r){if(null==r)return e.GetArgument(n);let a=e.i,i=0,o=0;for(;e.i<e.string.length;){let s=e.string.charAt(e.i);if("{"===s)e.i===a&&(o=1),e.GetArgument(n),i=e.i-a;else{if(t(e,r))return o&&(a++,i-=2),i<0?"":e.string.substring(a,a+i);if("\\"===s){e.i++,i++,o=0;let t=e.string.substring(e.i).match(/[a-z]+|./i);t&&(e.i+=t[0].length,i=e.i-a)}else e.i++,i++,o=0}}throw new m("RunawayArgument","Runaway argument for %1?",n)},e.MatchParam=t,e.addDelimiter=function(t,n,r,a){t.configuration.handlers.retrieve(e.NEW_DELIMITER).add(n,new h(n,r,a))},e.addMacro=function(t,n,r,a,i=""){t.configuration.handlers.retrieve(e.NEW_COMMAND).add(n,new M(i||n,r,a))},e.addEnvironment=function(t,n,r,a){t.configuration.handlers.retrieve(e.NEW_ENVIRONMENT).add(n,new M(n,r,a))},e.NEW_DELIMITER="new-Delimiter",e.NEW_COMMAND="new-Command",e.NEW_ENVIRONMENT="new-Environment"}(p||(p={}));const N=p,w=MathJax._.input.tex.TokenMap,E=(w.parseResult,w.AbstractTokenMap,w.RegExpMap,w.AbstractParseMap,w.CharacterMap,w.DelimiterMap),b=w.MacroMap,x=w.CommandMap,v=w.EnvironmentMap,A=MathJax._.input.tex.base.BaseMethods,G=(A.splitAlignArray,A.default),y=MathJax._.input.tex.ParseUtil,C=(y.KeyValueType,y.KeyValueTypes,y.ParseUtil);let I={NewCommand:function(e,t){let n=N.GetCsNameArgument(e,t),r=N.GetArgCount(e,t),a=e.GetBrackets(t),i=e.GetArgument(t);N.addMacro(e,n,I.Macro,[i,r,a]),e.Push(e.itemFactory.create("null"))},NewEnvironment:function(e,t){let n=g.trimSpaces(e.GetArgument(t)),r=N.GetArgCount(e,t),a=e.GetBrackets(t),i=e.GetArgument(t),o=e.GetArgument(t);N.addEnvironment(e,n,I.BeginEnv,[!0,i,o,r,a]),e.Push(e.itemFactory.create("null"))},MacroDef:function(e,t){let n=N.GetCSname(e,t),r=N.GetTemplate(e,t,"\\"+n),a=e.GetArgument(t);r instanceof Array?N.addMacro(e,n,I.MacroWithTemplate,[a].concat(r)):N.addMacro(e,n,I.Macro,[a,r]),e.Push(e.itemFactory.create("null"))},Let:function(e,t){const n=N.GetCSname(e,t);let r=e.GetNext();"="===r&&(e.i++,r=e.GetNext());const a=e.configuration.handlers;if(e.Push(e.itemFactory.create("null")),"\\"===r){t=N.GetCSname(e,t);let r=a.get("delimiter").lookup("\\"+t);if(r)return void N.addDelimiter(e,"\\"+n,r.char,r.attributes);const i=a.get("macro").applicable(t);if(!i)return;if(i instanceof b){const r=i.lookup(t);return void N.addMacro(e,n,r.func,r.args,r.token)}r=i.lookup(t);const o=e=>i.parser(e,r);return void N.addMacro(e,n,o,[n,r.char])}e.i++;const i=a.get("delimiter").lookup(r);i?N.addDelimiter(e,"\\"+n,i.char,i.attributes):N.addMacro(e,n,I.Macro,[r])},MacroWithTemplate:function(e,t,n,r,...a){const i=parseInt(r,10);if(a.length){let r=[];if(e.GetNext(),a[0]&&!N.MatchParam(e,a[0]))throw new m("MismatchUseDef","Use of %1 doesn't match its definition",t);if(i){for(let n=0;n<i;n++)r.push(N.GetParameter(e,t,a[n+1]));n=C.substituteArgs(e,r,n)}}e.string=C.addArgs(e,n,e.string.slice(e.i)),e.i=0,C.checkMaxMacros(e)},BeginEnv:function(e,t,n,r,a,i){const o=t.getName();if(t.getProperty("end")&&e.stack.env.closing===o)return delete e.stack.env.closing,r&&e.stack.env.processing!==o?(e.stack.env.processing=o,e.string=C.addArgs(e,`${r}\\end{${t.getName()}}`,e.string.slice(e.i)),e.i=0,null):(delete e.stack.env.processing,e.itemFactory.create("end").setProperty("name",o));if(a){let o=[];if(null!=i){let n=e.GetBrackets("\\begin{"+t.getName()+"}");o.push(null==n?i:n)}for(let n=o.length;n<a;n++)o.push(e.GetArgument("\\begin{"+t.getName()+"}"));n=C.substituteArgs(e,o,n),r=C.substituteArgs(e,[],r)}return e.string=C.addArgs(e,n,e.string.slice(e.i)),e.i=0,e.itemFactory.create("beginEnv").setProperty("name",t.getName())}};I.Macro=G.Macro;const k=I;new x("Newcommand-macros",{newcommand:"NewCommand",renewcommand:"NewCommand",newenvironment:"NewEnvironment",renewenvironment:"NewEnvironment",def:"MacroDef",let:"Let"},k);const _=MathJax._.input.tex.ParseMethods.default;const P=c.create("newcommand",{handler:{macro:["Newcommand-macros"]},items:{[d.prototype.kind]:d},options:{maxMacros:1e3},init:function(e){new E(N.NEW_DELIMITER,_.delimiter,{}),new x(N.NEW_COMMAND,{},{}),new v(N.NEW_ENVIRONMENT,_.environment,{},{}),e.append(c.local({handler:{character:[],delimiter:[N.NEW_DELIMITER],macro:[N.NEW_DELIMITER,N.NEW_COMMAND],environment:[N.NEW_ENVIRONMENT]},priority:-1}))}});MathJax.loader&&MathJax.loader.checkVersion("[tex]/newcommand","4.0.0-beta.6","tex-extension"),o({_:{input:{tex:{newcommand:{NewcommandConfiguration:a,NewcommandItems:t,NewcommandMethods:r,NewcommandUtil:n}}}}})})();